import{s as S,r as C,O}from"./assets/switcher-BsdiuDBl.js";import"./assets/vendor-CsIy9GeN.js";const e={favoriteCategoriesList:document.querySelector(".favorite-categories"),favoriteRecipesList:document.querySelector(".favorite-list"),warning:document.querySelector(".empty-storage"),paginationBox:document.getElementById("pagination"),allBtn:document.querySelector(".all-btn")};let c="";const b=()=>window.innerWidth<768?9:12,I=(t,n)=>{const o={};for(let a=0;a<t.length;a+=n){const i=Math.floor(a/n)+1;o[i]=t.slice(a,a+n)}return o},M=()=>{const t=N(),n='<button class="button-fav all-btn" name="all">All categories</button>',o=JSON.parse(localStorage.getItem("favorites"))||[];e.favoriteRecipesList.innerHTML="",e.favoriteCategoriesList.innerHTML="",o.length?e.favoriteCategoriesList.innerHTML=`${n}${t}`:e.allBtn.style.display="none",g()},g=(t=1)=>{const n=localStorage.getItem("favorites"),o=JSON.parse(n)||[];if(e.allBtn.style.display="none",o.length){e.allBtn.style.display="block";const a=b(),i=I(o,a),d=Object.keys(i).length;d>1?(e.paginationBox.style.display="block",S(t,a,d,g)):e.paginationBox.style.display="none";let r;c===""?r=o:r=o.filter(s=>s.category===c);const y=r.reduce((s,{title:l,description:u,preview:v,rating:L,id:h,category:B})=>s+C(l,u,v,L,h,B),"");e.favoriteRecipesList.innerHTML=y,document.querySelectorAll(".favorite-btn").forEach(s=>{s.onclick=()=>A(s)}),document.querySelectorAll(".item-rec").forEach(s=>{s.addEventListener("click",()=>{O(s)})}),e.warning.classList.add("is-hidden")}else e.warning.classList.remove("is-hidden"),e.allBtn.classList.add("is-hidden");o.length===0?(e.warning.classList.remove("is-hidden"),e.paginationBox.style.display="none",e.favoriteCategoriesList.innerHTML="",e.allBtn.style.display="none"):e.warning.classList.add("is-hidden")},N=()=>{const t=localStorage.getItem("favorites"),n=JSON.parse(t)||[];return n.length?n.flatMap(o=>o.category).filter((o,a,i)=>i.indexOf(o)===a).reduce((o,a)=>o+q(a),""):""},q=t=>`<button class="button-fav">${t}</button>`,x=t=>{t.target.nodeName==="BUTTON"&&(t.target.name==="all"?(c="",m(t.target)):(c=t.target.textContent,m(t.target)),g())},m=t=>{const n=document.querySelector(".all-btn");document.querySelectorAll(".button-fav").forEach(a=>{a===t?a.classList.add("onActive"):a.classList.remove("onActive")}),n.classList.remove("onActive")},A=t=>{const n=JSON.parse(t.dataset.info),o=localStorage.getItem("favorites");let a=JSON.parse(o)||[];const i=a.findIndex(r=>r.id===n.id);if(i!==-1){const r=a[i].category;a.splice(i,1),localStorage.setItem("favorites",JSON.stringify(a)),(JSON.parse(localStorage.getItem("favorites"))||[]).some(f=>f.category===r)||(document.querySelectorAll(".item").forEach(l=>{l.dataset.category===r&&l.remove()}),e.favoriteCategoriesList.querySelectorAll(".button-fav").forEach(l=>{l.textContent===r&&l.remove()}))}(JSON.parse(localStorage.getItem("favorites"))||[]).length===0?(e.favoriteRecipesList.innerHTML="",e.allBtn.style.display="none",e.warning.classList.remove("is-hidden"),e.paginationBox.style.display="none",e.favoriteCategoriesList.innerHTML=""):g()};document.addEventListener("DOMContentLoaded",M);e.favoriteCategoriesList.addEventListener("click",x);
//# sourceMappingURL=favorites.js.map
